<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scottish Fold Cat Jumper</title>
    <style>
        body{margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(#87CEEB,#98D8C8);font-family:Arial;overflow:hidden}
        canvas{border:2px solid #333;background:linear-gradient(#87CEEB 70%,#228B22);box-shadow:0 4px 20px rgba(0,0,0,.3);max-width:100%;max-height:100vh}
        .ui{position:absolute;top:20px;color:#333;font-weight:bold;text-shadow:1px 1px 2px #fff}
        .instructions{left:50%;transform:translateX(-50%);font-size:18px}
        .score{right:20px;font-size:24px}
        .highscore{left:20px;font-size:18px}
    </style>
</head>
<body>
    <div class="ui instructions">SPACE / UP / TAP to jump!</div>
    <div class="ui score">Score: <span id="score">0</span></div>
    <div class="ui highscore">Best: <span id="highscore">0</span></div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const highscoreEl = document.getElementById('highscore');

        // High score
        let highScore = parseInt(localStorage.getItem('catJumperHighScore') || '0');
        highscoreEl.textContent = highScore;

        // Load your cat
        const catImg = new Image();
        catImg.src = 'https://raw.githubusercontent.com/amerisaurusrex/amerisaurusrex.github.io/main/cat.png';
        let catLoaded = false;
        catImg.onload = () => catLoaded = true;

        // Game state
        const cat = {x:150, y:300, w:90, h:80, vx:0, vy:0, onGround:false};
        const rooftops = [];
        let cameraX = 0;
        let score = 0;
        let gameOver = false;
        const keys = {};

        // Audio
        let audioCtx = null;
        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            audioCtx.resume();
        }

        function meow(type = 'jump') {
            if (!audioCtx) return;
            const t = audioCtx.currentTime;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'triangle';
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            if (type === 'jump') {
                const vars = [[880,1350,0.11,0.24],[750,1200,0.13,0.22],[900,1400,0.10,0.25]];
                const [s,e,d,v] = vars[Math.floor(Math.random()*vars.length)];
                osc.frequency.setValueAtTime(s, t);
                osc.frequency.exponentialRampToValueAtTime(e, t+d);
                gain.gain.setValueAtTime(v, t);
                gain.gain.exponentialRampToValueAtTime(0.01, t+d+0.08);
                osc.start(t); osc.stop(t+d+0.1);
            } else {
                osc.frequency.setValueAtTime(1200, t);
                osc.frequency.exponentialRampToValueAtTime(250, t+0.7);
                gain.gain.setValueAtTime(0.4, t);
                gain.gain.exponentialRampToValueAtTime(0.01, t+0.9);
                osc.start(t); osc.stop(t+1);
            }
        }

        // Generate rooftops
        function generateRooftops() {
            rooftops.length = 0;
            let x = 0;
            for (let i = 0; i < 50; i++) {
                const gap = 180 + Math.random() * 80;
                const y = 400 + Math.random() * 100 - 50;
                rooftops.push({x, y, w:160 + Math.random()*80, h:30});
                x += gap + 160;
            }
        }

        // Input
        window.addEventListener('keydown', e => { keys[e.code] = true; initAudio(); });
        window.addEventListener('keyup', e => keys[e.code] = false);
        canvas.addEventListener('touchstart', e => {
            e.preventDefault();
            initAudio();
            if (gameOver) reset();
            else if (cat.onGround) { cat.vy = -18; cat.onGround = false; meow('jump'); }
        });

        function drawCat() {
            const x = cat.x - cameraX;
            const y = cat.y;
            ctx.save();
            ctx.shadowColor = '#fff';
            ctx.shadowBlur = 30;
            if (catLoaded) {
                ctx.drawImage(catImg, x-20, y-20, cat.w+40, cat.h+40);
            } else {
                ctx.fillStyle = '#f8f8f8';
                ctx.beginPath();
                ctx.ellipse(x+25, y+40, 40, 30, 0, 0, Math.PI*2);
                ctx.ellipse(x+25, y+10, 30, 28, 0, 0, Math.PI*2);
                ctx.fill();
            }
            ctx.restore();
        }

        function drawRooftop(r) {
            const x = r.x - cameraX;
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(x, r.y, r.w, r.h);
            ctx.fillStyle = '#A0522D';
            ctx.fillRect(x, r.y-5, r.w, 5);
        }

        function update() {
            if (gameOver) {
                if (keys['Space'] || keys['ArrowUp']) reset();
                return;
            }

            if ((keys['Space'] || keys['ArrowUp']) && cat.onGround) {
                cat.vy = -18;
                cat.onGround = false;
                meow('jump');
            }

            cat.vy += 0.8;
            cat.y += cat.vy;
            cat.x += 3;

            cameraX = cat.x - 300;

            cat.onGround = false;
            for (const r of rooftops) {
                if (cat.x + cat.w > r.x && cat.x < r.x + r.w &&
                    cat.y + cat.h > r.y && cat.y + cat.h < r.y + r.h + 20 &&
                    cat.vy > 0) {
                    cat.y = r.y - cat.h;
                    cat.vy = 0;
                    cat.onGround = true;
                }
            }

            if (rooftops[rooftops.length-1].x < cameraX + 1000) {
                const last = rooftops[rooftops.length-1];
                const gap = 180 + Math.random() * 100;
                rooftops.push({
                    x: last.x + last.w + gap,
                    y: 400 + Math.random() * 100 - 50,
                    w: 160 + Math.random()*80,
                    h: 30
                });
            }

            if (cat.y > 700) {
                meow('fall');
                gameOver = true;
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('catJumperHighScore', highScore);
                    highscoreEl.textContent = highScore;
                }
            }

            score = Math.floor(cameraX / 10);
            scoreEl.textContent = score;
        }

        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            rooftops.forEach(r => { if (r.x - cameraX > -200 && r.x - cameraX < 1000) drawRooftop(r); });
            drawCat();

            if (gameOver) {
                ctx.fillStyle = 'rgba(0,0,0,0.8)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#fff';
                ctx.font = '50px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('You Fell!', canvas.width/2, canvas.height/2 - 40);
                ctx.font = '28px Arial';
                ctx.fillText('Press SPACE or TAP to restart', canvas.width/2, canvas.height/2 + 20);
            }
        }

        function reset() {
            generateRooftops();
            cat.x = 150;
            cat.y = rooftops[0].y - cat.h;
            cat.vy = 0;
            cat.onGround = true;
            cameraX = 0;
            score = 0;
            gameOver = false;
        }

        function loop() {
            update();
            render();
            request

AnimationFrame(loop);
        }

        generateRooftops();
        reset();
        loop();
    </script>
</body>
</html>
